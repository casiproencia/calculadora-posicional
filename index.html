<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora Posicional</title>

<style>
* {
  box-sizing: border-box;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

body {
  margin: 0;
  background: #000;
  color: #fff;
  display: flex;
  justify-content: center;
}

.container {
  width: 100%;
  max-width: 420px;
  padding: 20px;
  text-align: center;
}

.header {
  background: #1f8b3a;
  padding: 14px;
  border-radius: 12px;
  font-weight: bold;
  margin-bottom: 12px;
}

select {
  width: 100%;
  padding: 12px;
  border-radius: 12px;
  border: none;
  background: #24a148;
  color: #fff;
  font-size: 16px;
  margin-bottom: 14px;
}

.block {
  border-radius: 14px;
  padding: 14px;
  margin-bottom: 14px;
}

.a { border: 2px solid #2ecc71; }
.b { border: 2px solid #3498db; }

.block-title {
  text-align: left;
  margin-bottom: 10px;
  font-weight: bold;
}

.inputs {
  display: flex;
  gap: 10px;
  justify-content: center;
}

input {
  width: 100%;
  padding: 10px;
  border-radius: 10px;
  border: none;
  font-size: 16px;
  text-align: center;
}

input[type="number"] {
  inputmode: decimal;
}

button {
  width: 100%;
  padding: 14px;
  border-radius: 14px;
  border: none;
  background: #2563eb;
  color: #fff;
  font-size: 18px;
  font-weight: bold;
  margin: 10px 0 16px;
}

.results {
  display: flex;
  gap: 12px;
  justify-content: center;
}

.result-box {
  background: #e0f2ff;
  color: #000;
  border-radius: 10px;
  padding: 10px;
  min-width: 120px;
}

.resto-box {
  min-width: 70px;
}

.steps {
  background: #dbeafe;
  color: #000;
  border-radius: 14px;
  padding: 14px;
  margin-top: 14px;
  text-align: left;
}

.blue { color: #2563eb; font-weight: bold; }
.green { color: #15803d; font-weight: bold; }
.orange { color: #c2410c; font-weight: bold; }
.purple { color: #7c3aed; font-weight: bold; }

.footer {
  margin-top: 14px;
  font-size: 13px;
  opacity: 0.7;
}
</style>
</head>

<body>
<div class="container">

<div class="header">CALCULADORA POSICIONAL</div>

<select id="op">
  <option value="suma">SUMA</option>
  <option value="resta">RESTA</option>
  <option value="multi">MULTIPLICACIÓN</option>
  <option value="div">DIVISIÓN</option>
</select>

<div class="block a">
  <div class="block-title">NÚMERO A</div>
  <div class="inputs">
    <input id="a_ent" type="number" placeholder="Entero">
    <input id="a_dec" type="number" placeholder="Decimales">
  </div>
</div>

<div class="block b">
  <div class="block-title">NÚMERO B</div>
  <div class="inputs">
    <input id="b_ent" type="number" placeholder="Entero">
    <input id="b_dec" type="number" placeholder="Decimales">
  </div>
</div>

<button onclick="calcular()">CALCULAR</button>

<div class="results">
  <div class="result-box">
    <div>Resultado</div>
    <div id="resultado"></div>
  </div>
  <div class="result-box resto-box">
    <div>Resto</div>
    <div id="resto"></div>
  </div>
</div>

<div id="pasos" class="steps"></div>

<div class="footer">Creada por Jose Casanova</div>

</div>

<script>
function normalizar(ent, dec) {
  ent = ent || "0";
  dec = dec || "";
  return { ent, dec, total: ent + dec, decs: dec.length };
}

function calcular() {
  const op = document.getElementById("op").value;

  const A = normalizar(a_ent.value, a_dec.value);
  const B = normalizar(b_ent.value, b_dec.value);

  const maxDec = Math.max(A.decs, B.decs);

  const aNum = BigInt(A.ent + A.dec.padEnd(maxDec, "0"));
  const bNum = BigInt(B.ent + B.dec.padEnd(maxDec, "0"));

  let pasos = "";
  let res = "";
  let resto = "";

  pasos += `<div class="blue">${A.ent},${A.dec.padEnd(maxDec,"0")} `;
  pasos += `${op==="resta"?"-":op==="multi"?"×":op==="div"?"÷":"+"} `;
  pasos += `${B.ent},${B.dec.padEnd(maxDec,"0")}</div>`;

  if (op === "suma") {
    const r = aNum + bNum;
    res = (r.toString().slice(0, -maxDec) || "0") + "," + r.toString().slice(-maxDec);
    pasos += `<div class="green">Resultado: ${res}</div>`;
  }

  if (op === "resta") {
    const r = aNum - bNum;
    res = (r.toString().slice(0, -maxDec) || "0") + "," + r.toString().slice(-maxDec);
    pasos += `<div class="green">Resultado: ${res}</div>`;
  }

  if (op === "multi") {
    const r = aNum * bNum;
    const decs = maxDec * 2;
    const s = r.toString().padStart(decs+1,"0");
    res = s.slice(0,-decs)+","+s.slice(-decs);
    pasos += `<div class="green">Resultado: ${res}</div>`;
  }

  if (op === "div") {
    const a = Number(A.ent + "." + (A.dec||"0"));
    const b = Number(B.ent + "." + (B.dec||"0"));
    const coc = Math.floor(a / b);
    const rest = (a - coc*b).toFixed(2);
    res = coc;
    resto = rest;
    pasos += `<div class="green">Cociente: ${coc}</div>`;
    pasos += `<div class="purple">Resto: ${rest}</div>`;
  }

  resultado.innerText = res;
  resto.innerText = resto;
  pasosDiv.innerHTML = pasos;
}

const pasosDiv = document.getElementById("pasos");
</script>

</body>
</html>