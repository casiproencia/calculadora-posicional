<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora</title>

<style>
body{
    margin:0;
    background:#020617;
    color:#fff;
    font-family: system-ui;
    display:flex;
    justify-content:center;
}
.app{width:360px;padding:16px;}
h1{text-align:center;margin-bottom:14px;}
select,input,button{
    width:100%;padding:14px;border-radius:14px;
    border:none;margin-bottom:10px;font-size:16px;
}
select{background:#16a34a;color:#fff;font-weight:bold;}
input{background:#1f2937;color:#fff;text-align:center;}
button{background:#2563eb;color:#fff;font-weight:bold;}
.btn-reset{background:#374151;}
.boxes{display:flex;gap:10px;}
.box{flex:1;padding:12px;border-radius:14px;font-weight:bold;}
.res{background:#1e3a8a;}
.rest{background:#14532d;}
.paso{
    margin-top:10px;
    background:#22d3ee;
    color:#000;
    padding:12px;
    border-radius:14px;
    font-size:14px;
    white-space:pre-line;
}
footer{text-align:center;margin-top:10px;font-size:12px;color:#94a3b8;}
</style>
</head>

<body>
<div class="app">

<h1>CALCULADORA</h1>

<select id="op">
<option>SUMA</option>
<option>RESTA</option>
<option>MULTIPLICACIÓN</option>
<option>DIVISIÓN</option>
</select>

<input id="a" inputmode="decimal" placeholder="Número A">
<input id="b" inputmode="decimal" placeholder="Número B">

<button onclick="calcular()">CALCULAR</button>
<button class="btn-reset" onclick="resetear()">REINICIAR</button>

<div class="boxes">
<div class="box res">Resultado<br><span id="res">—</span></div>
<div class="box rest">Resto<br><span id="resto">—</span></div>
</div>

<div class="paso" id="paso">PROCESO PASO A PASO</div>

<footer>Creada por Jose Casanova</footer>
</div>

<script>
function norm(v){return v.replace(',','.');}

function calcular(){
    let op=document.getElementById('op').value;
    let a=norm(document.getElementById('a').value);
    let b=norm(document.getElementById('b').value);
    if(!a||!b)return;

    let da=(a.split('.')[1]||'').length;
    let db=(b.split('.')[1]||'').length;
    let f=Math.pow(10,Math.max(da,db));

    let A=Math.round(parseFloat(a)*f);
    let B=Math.round(parseFloat(b)*f);

    let pasos=[];
    let res=0, resto='—';

    if(op==='SUMA'){
        let carry=0;
        let sa=A.toString().padStart(B.toString().length,'0');
        let sb=B.toString().padStart(sa.length,'0');
        for(let i=sa.length-1;i>=0;i--){
            let s=parseInt(sa[i])+parseInt(sb[i])+carry;
            pasos.push(`${sa[i]} + ${sb[i]}${carry?` + ${carry}`:''} = ${s} → cifra ${s%10}`);
            carry=Math.floor(s/10);
        }
        if(carry)pasos.push(`Llevada final: ${carry}`);
        res=(A+B)/f;
    }

    if(op==='RESTA'){
        let borrow=0;
        let sa=A.toString().padStart(B.toString().length,'0');
        let sb=B.toString().padStart(sa.length,'0');
        for(let i=sa.length-1;i>=0;i--){
            let x=parseInt(sa[i])-borrow;
            let y=parseInt(sb[i]);
            if(x<y){x+=10;borrow=1;}else borrow=0;
            pasos.push(`${x} - ${y} = ${x-y}`);
        }
        res=(A-B)/f;
    }

    if(op==='MULTIPLICACIÓN'){
        let carry=0;
        let sA=A.toString();
        for(let i=sA.length-1;i>=0;i--){
            let m=parseInt(sA[i])*B+carry;
            pasos.push(`${sA[i]} × ${B} + ${carry} = ${m} → cifra ${m%10}`);
            carry=Math.floor(m/10);
        }
        if(carry)pasos.push(`Llevada final: ${carry}`);
        res=(A*B)/(f*f);
    }

    if(op==='DIVISIÓN'){
        let parcial=0;
        let sA=A.toString();
        let coc='';
        for(let i=0;i<sA.length;i++){
            parcial=parcial*10+parseInt(sA[i]);
            let q=Math.floor(parcial/B);
            coc+=q;
            pasos.push(`${parcial} ÷ ${B} = ${q}`);
            parcial%=B;
            pasos.push(`Resto: ${parcial}`);
        }
        res=parseFloat(coc)/f;
        resto=parcial;
    }

    document.getElementById('res').textContent=res.toString().replace('.',',');
    document.getElementById('resto').textContent=resto;
    document.getElementById('paso').textContent=pasos.join('\n');
}

function resetear(){
    a.value=b.value='';
    res.textContent=resto.textContent='—';
    paso.textContent='PROCESO PASO A PASO';
}
</script>
</body>
</html>